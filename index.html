<!DOCTYPE html>
<html lang="es">

    <head>
        <meta charset="UTF-8" />
        <title>Living Room ‚Ä¢ Sala de la casa</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="manifest" href="manifest.json">
        <meta name="theme-color" content="#2563eb">

        <style>
            * {
                box-sizing: border-box;
                font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            }

            body {
                margin: 0;
                min-height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
                background: linear-gradient(145deg, #dbeafe, #e0f2fe);
            }

            .app {
                background: #ffffff;
                width: 100%;
                max-width: 480px;
                padding: 24px;
                border-radius: 24px;
                box-shadow: 0 16px 40px rgba(0, 0, 0, 0.12);
                border: 3px solid #2563eb;
            }

            /* üåü Encabezado infantil Marie Kids (burbujas + estrellas) */
            .brand-header-kids {
                position: relative;
                overflow: hidden;
                padding: 14px 14px 12px;
                border-radius: 22px;
                margin-bottom: 12px;

                background: linear-gradient(135deg, #93c5fd, #60a5fa, #2563eb);
                border: 2px solid rgba(255, 255, 255, 0.65);
                box-shadow: 0 14px 28px rgba(37, 99, 235, 0.25);
                color: #fff;
            }

            .brand-row {
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .kids-badge {
                width: 52px;
                height: 52px;
                border-radius: 18px;
                display: grid;
                place-items: center;
                font-size: 1.55rem;

                background: rgba(255, 255, 255, 0.22);
                border: 1px solid rgba(255, 255, 255, 0.35);
                box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.35);
            }

            .kids-title {
                font-weight: 950;
                font-size: 1.55rem;
                letter-spacing: 0.02em;
                line-height: 1.05;
                text-shadow: 0 2px 0 rgba(0, 0, 0, 0.12);
            }

            .kids-subtitle {
                margin-top: 4px;
                font-size: 0.9rem;
                font-weight: 750;
                opacity: 0.95;
                display: flex;
                align-items: center;
                gap: 8px;
                flex-wrap: wrap;
            }

            .kids-pill {
                background: rgba(255, 255, 255, 0.22);
                border: 1px solid rgba(255, 255, 255, 0.35);
                padding: 4px 10px;
                border-radius: 999px;
                font-size: 0.82rem;
                font-weight: 850;
            }

            /* ‚≠ê Estrellitas flotando */
            .star {
                position: absolute;
                opacity: 0.9;
                filter: drop-shadow(0 2px 0 rgba(0, 0, 0, 0.12));
                animation: twinkle 2.8s ease-in-out infinite;
                pointer-events: none;
            }

            .star.s1 {
                top: 8px;
                right: 18px;
                font-size: 1.15rem;
                animation-delay: 0s;
            }

            .star.s2 {
                top: 40px;
                right: 60px;
                font-size: 0.95rem;
                animation-delay: .6s;
            }

            .star.s3 {
                bottom: 12px;
                right: 26px;
                font-size: 1.25rem;
                animation-delay: 1.1s;
            }

            /* ü´ß Burbujas */
            .bubble {
                position: absolute;
                width: 64px;
                height: 64px;
                border-radius: 999px;
                background: rgba(255, 255, 255, 0.22);
                border: 1px solid rgba(255, 255, 255, 0.28);
                box-shadow: inset 0 2px 0 rgba(255, 255, 255, 0.45);
                backdrop-filter: blur(2px);
                pointer-events: none;
                animation: floaty 6s ease-in-out infinite;
            }

            .b1 {
                left: -16px;
                top: -18px;
                animation-delay: 0s;
                transform: rotate(5deg);
            }

            .b2 {
                left: 40px;
                bottom: -22px;
                width: 52px;
                height: 52px;
                animation-delay: .8s;
            }

            .b3 {
                right: -22px;
                bottom: -26px;
                width: 76px;
                height: 76px;
                animation-delay: 1.3s;
            }

            @keyframes floaty {

                0%,
                100% {
                    transform: translateY(0) scale(1);
                }

                50% {
                    transform: translateY(-8px) scale(1.03);
                }
            }

            @keyframes twinkle {

                0%,
                100% {
                    transform: scale(1) rotate(0deg);
                    opacity: 0.9;
                }

                50% {
                    transform: scale(1.12) rotate(6deg);
                    opacity: 1;
                }
            }


            h1 {
                margin: 0 0 4px 0;
                text-align: center;
                font-size: 1.5rem;
            }

            .subtitle {
                text-align: center;
                font-size: 0.9rem;
                color: #6b7280;
                margin-bottom: 14px;
            }

            /* Barra Correctas / Por mejorar */
            .status-bar {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 8px;
                padding: 8px 12px;
                border-radius: 999px;
                background: #eff6ff;
                border: 1px solid #bfdbfe;
                font-size: 0.9rem;
            }

            .xp,
            .hearts {
                display: flex;
                align-items: center;
                gap: 4px;
                font-weight: 600;
            }

            .xp span {
                color: #16a34a;
                /* verde correctas */
            }

            .hearts span {
                color: #f97316;
                /* naranja por mejorar */
            }

            /* Barra de progreso */
            .progress-wrapper {
                margin-bottom: 14px;
            }

            .progress-label {
                display: flex;
                justify-content: space-between;
                font-size: 0.8rem;
                color: #6b7280;
                margin-bottom: 4px;
            }

            .progress {
                width: 100%;
                height: 10px;
                background: #e5e7eb;
                border-radius: 999px;
                overflow: hidden;
            }

            .progress-inner {
                height: 100%;
                width: 0%;
                border-radius: 999px;
                background: linear-gradient(90deg, #60a5fa, #2563eb);
                transition: width 0.2s ease;
            }

            .card {
                border-radius: 20px;
                padding: 18px;
                background: #f9fafb;
                border: 1px solid #e5e7eb;
                margin-bottom: 16px;
                transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease;
            }

            .card.correct {
                animation: pulse 0.4s ease;
                border-color: #2563eb;
                box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.3);
            }

            .card.wrong {
                animation: shake 0.3s ease;
                border-color: #ef4444;
                box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.3);
            }

            @keyframes pulse {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.03);
                }

                100% {
                    transform: scale(1);
                }
            }

            @keyframes shake {

                0%,
                100% {
                    transform: translateX(0);
                }

                20% {
                    transform: translateX(-4px);
                }

                40% {
                    transform: translateX(4px);
                }

                60% {
                    transform: translateX(-4px);
                }

                80% {
                    transform: translateX(4px);
                }
            }

            .emoji-container {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 12px;
                margin-bottom: 6px;
            }

            .emoji {
                font-size: 5rem;
                /* puedes subirlo a 5rem o 6rem si lo quieres m√°s grande */
                text-align: center;
            }

            .speak-btn {
                font-size: 1.6rem;
                cursor: pointer;
                background: #eff6ff;
                border-radius: 999px;
                border: 1px solid #bfdbfe;
                padding: 6px 10px;
                transition: transform 0.1s ease, background 0.15s ease, border-color 0.15s ease;
            }

            .speak-btn:hover {
                transform: scale(1.1);
                background: #dbeafe;
                border-color: #93c5fd;
            }

            .word {
                text-align: center;
                font-size: 1.6rem;
                /* sube este valor si quieres la palabra m√°s grande */
                font-weight: 700;
                margin-bottom: 2px;
            }

            .translation {
                text-align: center;
                font-size: 0.95rem;
                color: #6b7280;
                margin-bottom: 12px;
            }

            .example-en,
            .example-es,
            .question {
                font-size: 0.98rem;
                margin: 6px 0;
            }

            .label {
                font-weight: 600;
            }

            .question {
                margin-top: 12px;
                font-weight: 700;
                color: #111827;
            }

            .controls {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                margin-top: 10px;
            }

            button.main-btn {
                flex: 1;
                border: none;
                padding: 10px 12px;
                border-radius: 999px;
                font-size: 0.95rem;
                cursor: pointer;
                background: linear-gradient(90deg, #60a5fa, #2563eb);
                color: #ffffff;
                font-weight: 600;
                letter-spacing: 0.02em;
                transition: transform 0.1s ease, box-shadow 0.1s ease, filter 0.15s ease;
                min-width: 120px;
            }

            button.main-btn:hover {
                transform: translateY(-1px);
                box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
                filter: brightness(1.05);
            }

            .feedback {
                margin-top: 10px;
                font-size: 0.95rem;
                text-align: center;
                min-height: 20px;
                font-weight: 600;
            }

            .feedback.good {
                color: #16a34a;
            }

            .feedback.bad {
                color: #ef4444;
            }

            .options {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin-top: 12px;
            }

            .option-btn {
                flex: 1;
                min-width: 80px;
                border-radius: 14px;
                border: 1px solid #d1d5db;
                background: #ffffff;
                padding: 8px 10px;
                font-size: 0.9rem;
                cursor: pointer;
                transition: background 0.15s ease, transform 0.1s ease, border 0.1s ease, opacity 0.1s ease;
                font-weight: 600;
            }

            .option-btn:hover:not(:disabled) {
                background: #e0f2fe;
                transform: translateY(-1px);
                border-color: #93c5fd;
            }

            .option-btn:disabled {
                cursor: default;
                opacity: 0.6;
            }

            /* ‚úÖ MENSAJE FINAL BONITO */
            .final-message {
                display: none;
                margin-top: 14px;
                padding: 14px;
                border-radius: 16px;
                background: linear-gradient(145deg, #ecfeff, #dbeafe);
                border: 2px solid #93c5fd;
                text-align: center;
                font-size: 1rem;
                font-weight: 800;
                color: #1e3a8a;
            }

            .final-message span {
                display: block;
                margin-top: 6px;
                font-size: 0.9rem;
                font-weight: 650;
                color: #1f2937;
            }
        </style>
    </head>

    <body>
        <div class="app">

            <!-- üåü Encabezado infantil: Marie Kids -->
            <div class="brand-header-kids" aria-label="Marie Kids">
                <div class="bubble b1"></div>
                <div class="bubble b2"></div>
                <div class="bubble b3"></div>

                <div class="star s1">‚≠ê</div>
                <div class="star s2">‚ú®</div>
                <div class="star s3">üåü</div>

                <div class="brand-row">
                    <div class="kids-badge" aria-hidden="true">üß∏</div>
                    <div>
                        <div class="kids-title">Marie Kids</div>
                        <div class="kids-subtitle">
                            Aprende ingl√©s jugando
                            <span class="kids-pill">A1</span>
                            <span class="kids-pill">‚≠ê Stars</span>
                        </div>
                    </div>
                </div>
            </div>


            <h1>Living Room ‚Ä¢ Sala de la casa</h1>
            <p class="subtitle">Mira el emoji, escucha la palabra y elige el objeto correcto en ingl√©s. üõãÔ∏è</p>

            <!-- Barra de estado -->
            <div class="status-bar">
                <div class="xp">‚úÖ Correctas: <span id="xpValue">0</span></div>
                <div class="hearts">üß† Por mejorar: <span id="heartsValue">0</span></div>
            </div>

            <!-- Barra de progreso -->
            <div class="progress-wrapper">
                <div class="progress-label">
                    <span>Progreso de la lecci√≥n</span>
                    <span id="progressText">0/10</span>
                </div>
                <div class="progress">
                    <div class="progress-inner" id="progressBar"></div>
                </div>
            </div>

            <!-- Tarjeta principal -->
            <div class="card" id="lessonCard">
                <div class="emoji-container">
                    <div class="emoji" id="emoji">üõãÔ∏è</div>
                    <button class="speak-btn" onclick="speakWord()">üîä</button>
                </div>

                <div class="word" id="wordEn">sofa</div>
                <div class="translation" id="wordEs">sof√°</div>

                <p class="example-en">
                    <span class="label">Ingl√©s:</span>
                    <span id="exampleEn">This is a sofa.</span>
                </p>

                <p class="example-es">
                    <span class="label">Espa√±ol:</span>
                    <span id="exampleEs">Este es un sof√°.</span>
                </p>

                <p class="question" id="question">What is this?</p>

                <div class="options" id="optionsContainer"></div>

                <div class="feedback" id="feedback"></div>

                <!-- ‚úÖ MENSAJE FINAL -->
                <div class="final-message" id="finalMessage"></div>
            </div>

            <div class="controls">
                <button class="main-btn" onclick="nextLesson()">Next</button>
            </div>
        </div>

        <!-- üéµ Sonidos (coloca tus mp3 en la misma carpeta) -->
        <audio id="sound-correct" src="correct.mp3" preload="auto"></audio>
        <audio id="sound-wrong" src="wrong.mp3" preload="auto"></audio>
        <audio id="sound-levelup" src="levelup.mp3" preload="auto"></audio>

        <script>
            const itemsData = [
                {
                    emoji: "üõãÔ∏è",
                    en: "sofa",
                    es: "sof√°",
                    examplesEn: [
                        "This is a sofa.",
                        "I sit on the sofa.",
                        "The sofa is in the living room."
                    ],
                    examplesEs: [
                        "Este es un sof√°.",
                        "Yo me siento en el sof√°.",
                        "El sof√° est√° en la sala."
                    ],
                    questions: [
                        "What is this?",
                        "What is it?",
                        "What can you see in the living room?"
                    ]
                },
                {
                    emoji: "ü™ë",
                    en: "chair",
                    es: "silla",
                    examplesEn: [
                        "This is a chair.",
                        "I sit on the chair.",
                        "The chair is next to the sofa."
                    ],
                    examplesEs: [
                        "Esta es una silla.",
                        "Yo me siento en la silla.",
                        "La silla est√° al lado del sof√°."
                    ],
                    questions: [
                        "What is this?",
                        "Is this a chair or a sofa?",
                        "What can you see?"
                    ]
                },
                {
                    emoji: "üì∫",
                    en: "TV",
                    es: "televisi√≥n",
                    examplesEn: [
                        "This is a TV.",
                        "I watch TV in the living room.",
                        "The TV is on the wall."
                    ],
                    examplesEs: [
                        "Esta es una televisi√≥n.",
                        "Veo televisi√≥n en la sala.",
                        "La televisi√≥n est√° en la pared."
                    ],
                    questions: [
                        "What is this?",
                        "What do you watch?",
                        "Is this a TV?"
                    ]
                },
                {
                    emoji: "ü™ü",
                    en: "window",
                    es: "ventana",
                    examplesEn: [
                        "This is a window.",
                        "I open the window.",
                        "The window is big."
                    ],
                    examplesEs: [
                        "Esta es una ventana.",
                        "Yo abro la ventana.",
                        "La ventana es grande."
                    ],
                    questions: [
                        "What is this?",
                        "What can you open?",
                        "What is in the living room?"
                    ]
                },
                {
                    emoji: "üö™",
                    en: "door",
                    es: "puerta",
                    examplesEn: [
                        "This is a door.",
                        "I close the door.",
                        "The door is brown."
                    ],
                    examplesEs: [
                        "Esta es una puerta.",
                        "Yo cierro la puerta.",
                        "La puerta es marr√≥n."
                    ],
                    questions: [
                        "What is this?",
                        "What do you close?",
                        "Is this a door?"
                    ]
                },
                {
                    emoji: "üí°",
                    en: "lamp",
                    es: "l√°mpara",
                    examplesEn: [
                        "This is a lamp.",
                        "The lamp is on the table.",
                        "The lamp is bright."
                    ],
                    examplesEs: [
                        "Esta es una l√°mpara.",
                        "La l√°mpara est√° sobre la mesa.",
                        "La l√°mpara es brillante."
                    ],
                    questions: [
                        "What is this?",
                        "What gives light?",
                        "Is this a lamp?"
                    ]
                },
                {
                    emoji: "üß∂",
                    en: "rug",
                    es: "alfombra",
                    examplesEn: [
                        "This is a rug.",
                        "The rug is on the floor.",
                        "The rug is soft."
                    ],
                    examplesEs: [
                        "Esta es una alfombra.",
                        "La alfombra est√° en el piso.",
                        "La alfombra es suave."
                    ],
                    questions: [
                        "What is this?",
                        "What is on the floor?",
                        "Is this a rug?"
                    ]
                },
                {
                    emoji: "üñºÔ∏è",
                    en: "picture",
                    es: "cuadro",
                    examplesEn: [
                        "This is a picture.",
                        "The picture is on the wall.",
                        "I like this picture."
                    ],
                    examplesEs: [
                        "Este es un cuadro.",
                        "El cuadro est√° en la pared.",
                        "Me gusta este cuadro."
                    ],
                    questions: [
                        "What is this?",
                        "What is on the wall?",
                        "Is this a picture?"
                    ]
                },
                {
                    emoji: "üìö",
                    en: "bookshelf",
                    es: "librero",
                    examplesEn: [
                        "This is a bookshelf.",
                        "The books are on the bookshelf.",
                        "The bookshelf is in the living room."
                    ],
                    examplesEs: [
                        "Este es un librero.",
                        "Los libros est√°n en el librero.",
                        "El librero est√° en la sala."
                    ],
                    questions: [
                        "What is this?",
                        "Where are the books?",
                        "Is this a bookshelf?"
                    ]
                },
                {
                    emoji: "üéõÔ∏è",
                    en: "remote control",
                    es: "control remoto",
                    examplesEn: [
                        "This is a remote control.",
                        "I use the remote control for the TV.",
                        "The remote control is on the sofa."
                    ],
                    examplesEs: [
                        "Este es un control remoto.",
                        "Uso el control remoto para la televisi√≥n.",
                        "El control remoto est√° en el sof√°."
                    ],
                    questions: [
                        "What is this?",
                        "What do you use for the TV?",
                        "Is this a remote control?"
                    ]
                }
            ];

            let currentItem = null;

            // Correctas / Por mejorar
            let correctCount = 0;
            let wrongCount = 0;

            // ‚úÖ para controlar que solo se cuente 1 vez la correcta por tarjeta
            let answeredCorrectly = false;

            // progreso por lecci√≥n
            let progress = 0;
            const maxProgress = 10;

            const correctSpan = document.getElementById("xpValue");
            const wrongSpan = document.getElementById("heartsValue");
            const feedbackEl = document.getElementById("feedback");
            const lessonCard = document.getElementById("lessonCard");

            const progressBar = document.getElementById("progressBar");
            const progressText = document.getElementById("progressText");

            const soundCorrect = document.getElementById("sound-correct");
            const soundWrong = document.getElementById("sound-wrong");
            const soundLevelup = document.getElementById("sound-levelup");

            function updateProgressBar() {
                const percent = (progress / maxProgress) * 100;
                progressBar.style.width = percent + "%";
                progressText.textContent = `${progress}/${maxProgress}`;
            }

            function getRandomItem() {
                return itemsData[Math.floor(Math.random() * itemsData.length)];
            }

            function randomFromArray(arr) {
                return arr[Math.floor(Math.random() * arr.length)];
            }

            function generateLesson() {
                const item = getRandomItem();
                const idx = Math.floor(Math.random() * item.examplesEn.length); // mismo √≠ndice para EN/ES

                return {
                    data: item,
                    emoji: item.emoji,
                    word: item.en,
                    translation: item.es,
                    exampleEn: item.examplesEn[idx],
                    exampleEs: item.examplesEs[idx],
                    question: randomFromArray(item.questions)
                };
            }

            function renderLesson() {
                // nueva tarjeta: a√∫n no se ha respondido correctamente
                answeredCorrectly = false;

                const lesson = generateLesson();
                currentItem = lesson.data;

                document.getElementById("emoji").textContent = lesson.emoji;
                document.getElementById("wordEn").textContent = lesson.word;
                document.getElementById("wordEs").textContent = lesson.translation;
                document.getElementById("exampleEn").textContent = lesson.exampleEn;
                document.getElementById("exampleEs").textContent = lesson.exampleEs;
                document.getElementById("question").textContent = lesson.question;

                feedbackEl.textContent = "";
                feedbackEl.classList.remove("good", "bad");
                lessonCard.classList.remove("correct", "wrong");

                // ocultar mensaje final si estaba visible
                const finalBox = document.getElementById("finalMessage");
                finalBox.style.display = "none";
                finalBox.innerHTML = "";

                createOptions();
            }

            function createOptions() {
                const container = document.getElementById("optionsContainer");
                container.innerHTML = "";

                const correct = currentItem;
                const others = itemsData.filter(i => i.en !== correct.en);
                shuffleArray(others);

                const options = [correct.en, others[0].en, others[1].en];
                shuffleArray(options);

                options.forEach(optionText => {
                    const btn = document.createElement("button");
                    btn.textContent = optionText;
                    btn.className = "option-btn";
                    btn.onclick = () => checkAnswer(optionText, btn);
                    container.appendChild(btn);
                });
            }

            function speakFeedbackCorrect() {
                const phrases = [
                    "Great job!",
                    "Awesome!",
                    "Perfect!",
                    "Nice work!"
                ];
                speakText(randomFromArray(phrases));
            }

            function speakFeedbackWrong() {
                const phrases = [
                    "Not yet, try again.",
                    "Almost, try again.",
                    "Keep trying.",
                    "Don't give up."
                ];
                speakText(randomFromArray(phrases));
            }

            function speakText(text) {
                if (!("speechSynthesis" in window)) return;
                const utter = new SpeechSynthesisUtterance(text);
                utter.lang = "en-US";
                utter.rate = 0.95;
                utter.pitch = 1.02;
                window.speechSynthesis.cancel();
                window.speechSynthesis.speak(utter);
            }

            function checkAnswer(answer, clickedBtn) {
                if (!currentItem) return;

                // si ya se respondi√≥ correctamente esta tarjeta, no contar m√°s
                if (answeredCorrectly) return;

                if (answer === currentItem.en) {
                    // ‚úÖ Correcto
                    answeredCorrectly = true;

                    correctCount++;
                    correctSpan.textContent = correctCount;

                    if (progress < maxProgress) {
                        progress += 1;
                        updateProgressBar();
                    }

                    feedbackEl.textContent = randomFromArray([
                        "‚úÖ Great job!",
                        "‚úÖ Awesome!",
                        "‚úÖ Perfect!",
                        "‚úÖ Nice!"
                    ]);
                    feedbackEl.classList.remove("bad");
                    feedbackEl.classList.add("good");

                    playSound(soundCorrect);
                    speakFeedbackCorrect();

                    lessonCard.classList.remove("wrong");
                    lessonCard.classList.add("correct");

                    // deshabilitar todas las opciones despu√©s de acertar
                    document
                        .querySelectorAll(".option-btn")
                        .forEach(b => { b.disabled = true; });

                    if (correctCount > 0 && correctCount % 5 === 0) {
                        playSound(soundLevelup);
                    }

                    // ‚úÖ MENSAJE FINAL BONITO
                    if (progress >= maxProgress) {
                        playSound(soundLevelup);

                        const finalBox = document.getElementById("finalMessage");
                        finalBox.innerHTML = `
            üéâ ¬°Felicitaciones!<br>
            Hiciste <strong>${correctCount}</strong> correctas de
            <strong>${maxProgress}</strong>.
            <span>
              ¬°Excelente trabajo! üí™‚ú®<br>
              Sigue practicando, cada intento te hace mejor üöÄ
            </span>
          `;
                        finalBox.style.display = "block";

                        feedbackEl.textContent = "‚úÖ Lesson complete! Keep practicing.";
                        feedbackEl.classList.add("good");
                    }

                } else {
                    // ‚ùå Incorrecto, pero se puede seguir intentando
                    wrongCount++;
                    wrongSpan.textContent = wrongCount;

                    feedbackEl.textContent = `‚ùå Not yet. Try again.`;
                    feedbackEl.classList.remove("good");
                    feedbackEl.classList.add("bad");

                    playSound(soundWrong);
                    speakFeedbackWrong();

                    lessonCard.classList.remove("correct");
                    lessonCard.classList.add("wrong");

                    // deshabilitamos solo este bot√≥n para que pruebe otras opciones
                    if (clickedBtn) {
                        clickedBtn.disabled = true;
                    }
                }
            }

            function shuffleArray(arr) {
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
            }

            function nextLesson() {
                renderLesson();
            }

            // üîä Pronunciaci√≥n autom√°tica de la palabra (en ingl√©s)
            function speakWord() {
                const word = document.getElementById("wordEn").textContent;
                if (!("speechSynthesis" in window)) return;
                const utter = new SpeechSynthesisUtterance(word);
                utter.lang = "en-US";
                utter.rate = 0.9;
                window.speechSynthesis.cancel();
                window.speechSynthesis.speak(utter);
            }

            function playSound(audioElement) {
                if (!audioElement) return;
                audioElement.currentTime = 0;
                audioElement.play().catch(() => {
                    // Algunos navegadores bloquean el autoplay
                });
            }

            // Inicializar
            updateProgressBar();
            renderLesson();
        </script>
        <script>
            // Registrar Service Worker (PWA)
            if ("serviceWorker" in navigator) {
                window.addEventListener("load", () => {
                    navigator.serviceWorker.register("./service-worker.js").catch(() => { });
                });
            }
        </script>


    </body>

</html>
